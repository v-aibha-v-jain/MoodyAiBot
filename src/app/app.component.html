<div class="chat-container">
    <div style="position: absolute; top: 24px; right: 32px; z-index: 20;">
        <div style="position: relative;">
            <button (click)="toggleDropdown()" style="background: #23272f; color: #fff; border: 1px solid #444857; border-radius: 6px; padding: 7px 18px; font-size: 15px; cursor: pointer;">
                Modes ({{ selectedModeName }}) &#9662;
            </button>
            <div *ngIf="showDropdown" style="position: absolute; right: 0; top: 110%; background: #23272f; border: 1px solid #444857; border-radius: 6px; min-width: 120px; box-shadow: 0 2px 8px rgba(0,0,0,0.18); z-index: 10;">
                <div *ngFor="let mode of modes" (click)="selectMode(mode.value, mode.name)" style="padding: 10px 18px; cursor: pointer; color: #e0e0e0;">
                    {{ mode.name }}
                </div>
            </div>
        </div>
    </div>
    <div class="chat-log" id="chatLog">
        <div *ngFor="let msg of chatLog" class="chat-message {{msg.sender}}">
            <ng-container *ngIf="msg.sender === 'user'; else botMsg">
                <div class="chat-avatar" [innerHTML]="userAvatar"></div>
                <div class="chat-bubble">{{ msg.text }}</div>
            </ng-container>
            <ng-template #botMsg>
                <div class="chat-avatar" [innerHTML]="botAvatar"></div>
                <div class="chat-bubble">{{ msg.text }}</div>
            </ng-template>
        </div>
    </div>
    <form class="chat-input-container" (ngSubmit)="sendMessage()">
        <input type="text" class="chat-input" [(ngModel)]="userInput" name="chatInput" placeholder="Type your message..." autocomplete="off" required />
        <button type="submit" class="chat-send">Send</button>
    </form>
</div>